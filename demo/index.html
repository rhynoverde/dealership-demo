<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <!-- Disable default pinch zoom on the page -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>Dealership Demo - Version d-2.6.1</title>
  <link rel="stylesheet" href="demo.css" />
  <!-- Include Cropper.js CSS -->
  <link href="https://cdn.jsdelivr.net/npm/cropperjs@1.5.12/dist/cropper.min.css" rel="stylesheet">
  <!-- Include SweetAlert2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <!-- Include AWS SDK for S3 (Backblaze S3 compatibility) -->
  <script src="https://sdk.amazonaws.com/js/aws-sdk-2.953.0.min.js"></script>
</head>
<body>
  <div class="container">
    <!-- Step 1: Customer Info (Salesperson enters customer info) -->
    <section id="step1" class="step active">
      <div class="form-section">
        <h2>Customer Information</h2>
        <form id="customerForm">
          <label for="customerName">Customer Name</label>
          <input type="text" id="customerName" name="customerName" placeholder="First Name" required />
          <label for="customerEmail">Email (optional)</label>
          <input type="email" id="customerEmail" name="customerEmail" placeholder="example@example.com" />
          <label for="customerPhone">Phone Number (optional, recommended)</label>
          <input type="tel" id="customerPhone" name="customerPhone" placeholder="(555) 555-5555" />
          <button type="button" id="toStep2">Next</button>
        </form>
      </div>
    </section>
    
    <!-- Step 2: Photo Selection & Capture (Salesperson takes/uploads a photo) -->
    <section id="step2" class="step">
      <div class="form-section">
        <div id="photoOptions" class="photo-options">
          <button type="button" class="photo-option" data-option="take">
            <span class="icon">üì∑</span>
            <span class="label">Take Photo</span>
          </button>
          <button type="button" class="photo-option" data-option="upload">
            <span class="icon">‚¨ÜÔ∏è</span>
            <span class="label">Upload Photo</span>
          </button>
          <button type="button" class="photo-option" data-option="url">
            <span class="icon">üîó</span>
            <span class="label">Paste Image URL</span>
          </button>
        </div>
        
        <!-- Take Photo Section -->
        <div id="takePhotoSection" class="photo-section" style="display:none;">
          <div class="camera-header">
            <button type="button" id="cameraBack" class="back-btn">‚Üê Back</button>
          </div>
          <div id="cameraContainer">
            <video id="cameraPreview" autoplay playsinline></video>
            <div id="cameraOverlay">
              <div class="hole"></div>
            </div>
            <div id="zoomIndicator" class="zoom-indicator" style="display:none;">Zooming...</div>
          </div>
          <div class="camera-controls">
            <button type="button" id="swapCamera" class="icon-btn">‚Ü∫</button>
            <button type="button" id="capturePhoto" class="shutter-btn"></button>
            <button type="button" id="flashToggle" class="icon-btn flash-off">‚ö°</button>
          </div>
        </div>
        
        <!-- Upload Photo Section -->
        <div id="uploadPhotoSection" class="photo-section" style="display:none;">
          <p>Please choose a photo to upload:</p>
          <input type="file" id="uploadInput" accept="image/*" />
          <label for="uploadInput" class="upload-label">Select Photo</label>
          <button type="button" class="backToOptions">‚Üê Back</button>
        </div>
        
        <!-- Paste URL Section -->
        <div id="urlPhotoSection" class="photo-section" style="display:none;">
          <p>Please enter the image URL:</p>
          <label for="imageUrlInput" class="input-label">Image URL</label>
          <input type="url" id="imageUrlInput" placeholder="https://example.com/photo.jpg" />
          <button type="button" id="loadUrlImage">Load Image</button>
          <button type="button" class="backToOptions">‚Üê Back</button>
        </div>
        
        <!-- Cropping Section -->
        <div id="cropSection" class="photo-section" style="display:none;">
          <p>Adjust the photo inside the rectangle. Pinch to zoom and pan to frame your vehicle.</p>
          <div id="cropContainer">
            <img id="cropImage" src="" alt="To be cropped" />
          </div>
          <div class="crop-buttons">
            <button type="button" id="cropButton">Crop</button>
            <button type="button" id="fitEntireButton">Fit Entire Image</button>
            <button type="button" id="changePhoto">Change Photo</button>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Step 3: Salesperson Final Page (displays merged Hyperise image) -->
    <section id="step3" class="step">
      <div class="form-section">
        <h2>Final Image Ready for Sharing</h2>
        <div class="final-image-section">
          <div id="finalImageContainer">
            <img id="finalImage" src="" alt="Final Image" />
          </div>
        </div>
        <div class="final-buttons">
          <button type="button" id="textLink">Text Link</button>
          <button type="button" id="copyLink">Copy Link</button>
          <button type="button" id="startOver" class="start-over">Start Over</button>
        </div>
      </div>
    </section>
    
    <!-- Simulated Text Message Page (salesperson simulation) -->
    <section id="textMessagePage" class="step">
      <div class="form-section text-message-screen">
        <div class="message-bubble received">
          <p class="sender">ry,</p>
          <p>Thanks for purchasing a car with me today. I would appreciate if you followed the link to share a review and photo of your new car on social media, to let your friends and family know!</p>
          <p class="signature">Michael Jones<br>Demo Auto Sales</p>
          <p class="link"><a href="#" id="messageLink">justshar.ing/xyz</a></p>
        </div>
        <button type="button" id="backToStep3">‚Üê Back</button>
      </div>
    </section>
    
    <!-- Customer Share Page (when customer clicks link) -->
    <section id="customerSharePage" class="step">
      <div class="form-section">
        <h2>Share Your Vehicle Purchase!</h2>
        <div class="share-image-container">
          <img id="customerShareImage" src="" alt="Share Image" />
        </div>
        <!-- Single Share Now button that triggers native sharing -->
        <button type="button" id="shareNowButton" class="share-button">Share Now</button>
        <button type="button" id="backFromCustomerShare">‚Üê Back</button>
      </div>
    </section>
  </div>
  
  <footer id="pageFooter">
    <span class="footer-version">Version d-2.6.1</span>
  </footer>
  
  <!-- Include Cropper.js and our demo.js script -->
  <script src="https://cdn.jsdelivr.net/npm/cropperjs@1.5.12/dist/cropper.min.js"></script>
  <script src="demo.js"></script>
</body>
</html>
